(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{54931:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return t(13505)}])},13505:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var a=t(28520),r=t.n(a),o=t(85893),s=t(87462),i=t(4942),c=t(97685),l=t(67294),u=t(97937),d=t(8751),m=t(11475),f=t(45605),h=t(18429),p=t(89739),v=t(21640),y=t(78860),g=t(4340),w=t(93481),Z=t(94184),x=t.n(Z),b=t(59844),E=t(5467),j=t(15671),k=t(43144),N=t(32531),C=t(51630),S=function(e){(0,N.Z)(t,e);var n=(0,C.Z)(t);function t(){var e;return(0,j.Z)(this,t),(e=n.apply(this,arguments)).state={error:void 0,info:{componentStack:""}},e}return(0,k.Z)(t,[{key:"componentDidCatch",value:function(e,n){this.setState({error:e,info:n})}},{key:"render",value:function(){var e=this.props,n=e.message,t=e.description,a=e.children,r=this.state,o=r.error,s=r.info,i=s&&s.componentStack?s.componentStack:null,c="undefined"===typeof n?(o||"").toString():n,u="undefined"===typeof t?i:t;return o?l.createElement(P,{type:"error",message:c,description:l.createElement("pre",null,u)}):a}}]),t}(l.Component),_=t(96159),O=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]])}return t},F={success:p.Z,info:y.Z,error:g.Z,warning:v.Z},L={success:d.Z,info:f.Z,error:h.Z,warning:m.Z},I=function(e){var n,t=e.description,a=e.prefixCls,r=e.message,o=e.banner,d=e.className,m=void 0===d?"":d,f=e.style,h=e.onMouseEnter,p=e.onMouseLeave,v=e.onClick,y=e.afterClose,g=e.showIcon,Z=e.closable,j=e.closeText,k=e.action,N=O(e,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),C=l.useState(!1),S=(0,c.Z)(C,2),I=S[0],P=S[1],T=l.useRef(),M=l.useContext(b.E_),A=M.getPrefixCls,D=M.direction,R=A("alert",a),B=function(e){var n;P(!0),null===(n=N.onClose)||void 0===n||n.call(N,e)},H=!!j||Z,U=function(){var e=N.type;return void 0!==e?e:o?"warning":"info"}(),X=!(!o||void 0!==g)||g,z=x()(R,"".concat(R,"-").concat(U),(n={},(0,i.Z)(n,"".concat(R,"-with-description"),!!t),(0,i.Z)(n,"".concat(R,"-no-icon"),!X),(0,i.Z)(n,"".concat(R,"-banner"),!!o),(0,i.Z)(n,"".concat(R,"-rtl"),"rtl"===D),n),m),V=(0,E.Z)(N);return l.createElement(w.Z,{visible:!I,motionName:"".concat(R,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(e){return{maxHeight:e.offsetHeight}},onLeaveEnd:y},(function(e){var n=e.className,a=e.style;return l.createElement("div",(0,s.Z)({ref:T,"data-show":!I,className:x()(z,n),style:(0,s.Z)((0,s.Z)({},f),a),onMouseEnter:h,onMouseLeave:p,onClick:v,role:"alert"},V),X?function(){var e=N.icon,n=(t?L:F)[U]||null;return e?(0,_.wm)(e,l.createElement("span",{className:"".concat(R,"-icon")},e),(function(){return{className:x()("".concat(R,"-icon"),(0,i.Z)({},e.props.className,e.props.className))}})):l.createElement(n,{className:"".concat(R,"-icon")})}():null,l.createElement("div",{className:"".concat(R,"-content")},r?l.createElement("div",{className:"".concat(R,"-message")},r):null,t?l.createElement("div",{className:"".concat(R,"-description")},t):null),k?l.createElement("div",{className:"".concat(R,"-action")},k):null,H?l.createElement("button",{type:"button",onClick:B,className:"".concat(R,"-close-icon"),tabIndex:0},j?l.createElement("span",{className:"".concat(R,"-close-text")},j):l.createElement(u.Z,null)):null)}))};I.ErrorBoundary=S;var P=I,T=t(17054),M=t(74622),A=t(12979),D=t(71230),R=t(15746),B=t(11382),H=t(42101),U=t(50888),X=t(28114),z=t(68863);M.Z.Title,X.Z.Option;var V=function(e){var n=e.form,t=e.onFinish,a=e.onFinishFailed;return(0,o.jsxs)(T.Z,{layout:"vertical",name:"information",labelCol:{span:8},wrapperCol:{span:12},initialValues:{remember:!0},onFinish:t,onFinishFailed:a,autoComplete:"off",form:n,children:[(0,o.jsx)(T.Z.Item,{label:"Username",name:"username",children:(0,o.jsx)(z.Z,{style:{width:"70vh"}})}),(0,o.jsx)(T.Z.Item,{label:"password",name:"password",children:(0,o.jsx)(z.Z.Password,{style:{width:"70vh"}})})]})},q=t(9669),G=t.n(q),J=t(11163);function K(e,n,t,a,r,o,s){try{var i=e[o](s),c=i.value}catch(l){return void t(l)}i.done?n(c):Promise.resolve(c).then(a,r)}function Q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],a=!0,r=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(a=(s=i.next()).done)&&(t.push(s.value),!n||t.length!==n);a=!0);}catch(c){r=!0,o=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var W=function(){var e,n=(0,J.useRouter)(),t=Q(T.Z.useForm(),1)[0],a=M.Z.Title,s=(0,l.useState)(!1),i=s[0],c=s[1],u=(0,o.jsx)(U.Z,{style:{fontSize:24},spin:!0}),d=(0,l.useState)(!1),m=d[0],f=d[1],h=(0,l.useState)(""),p=h[0],v=h[1],y=function(e){g(e),console.log(e)},g=(e=r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,G().post("api/auth",{username:t.username,password:t.password}).then((function(e){console.log("login berhasil"),e.data.entriesData.length>0?(console.log(e.data.entriesData[0].access),"admin"==e.data.entriesData[0].access?"1"==e.data.entriesData[0].is_active?(f(!1),v(""),sessionStorage.setItem("isLogin","true"),n.push("/dashboard")):(f(!0),v("Akun ini tidak aktif")):(f(!0),v("Akun ini tidak memiliki akses"))):(f(!0),v("Username atau password salah")),c(!1)})).catch((function(e){console.log("Login gagal",e),c(!1)}));case 3:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(a,r){var o=e.apply(n,t);function s(e){K(o,a,r,s,i,"next",e)}function i(e){K(o,a,r,s,i,"throw",e)}s(void 0)}))});return(0,l.useEffect)((function(){"true"==sessionStorage.getItem("isLogin")&&n.push("/dashboard")})),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{style:{width:"100%",height:"100vh",background:"#ecf0f1"},children:[(0,o.jsx)(a,{level:4,type:"secondary",style:{margin:"auto"},children:"\xa0"}),(0,o.jsxs)("div",{className:"content",style:{marginTop:"25vh"},children:[(0,o.jsxs)("div",{className:"header",style:{margin:"auto",width:"40%",marginLeft:"30%",marginRight:"70%"},children:[(0,o.jsx)(a,{level:4,type:"secondary",style:{margin:"auto"},children:"Sistem Monitoring Teknisi Lapangan"}),(0,o.jsx)("br",{})]}),(0,o.jsx)("div",{children:(0,o.jsx)(A.Z,{title:"Login",bordered:!1,style:{width:"40%",margin:"auto"},children:(0,o.jsxs)("div",{className:"content",style:{textAlign:"center"},children:[(0,o.jsx)(V,{form:t,onFinish:y,onFinishFailed:y}),m?(0,o.jsx)(P,{message:"".concat(p),type:"error",style:{width:"70vh",marginBottom:20}}):"",(0,o.jsx)(D.Z,{children:(0,o.jsx)(R.Z,{children:i?(0,o.jsx)(B.Z,{indicator:u,style:{width:"70vh"}}):(0,o.jsx)(H.Z,{style:{width:"70vh"},type:"primary",onClick:function(){t.submit()},disabled:i,children:"Sign In"})})})]})})})]})]})})}}},function(e){e.O(0,[709,183,54,247,774,888,179],(function(){return n=54931,e(e.s=n);var n}));var n=e.O();_N_E=n}]);